* { box-sizing: border-box; }
:root { color-scheme: light dark; --bg: #f7f7f9; --fg: #222; --panel: #fff; --border: #e5e7eb; --muted: #666; --primary: #2563eb; --primary-hover: #1d4ed8; --answer-bg: #fff7f7; --answer-border: #f87171; --answer-fg: #991b1b; --success-bg: #ecfdf5; --success-border: #34d399; --success-fg: #065f46; --dot-gray: #d1d5db; --dot-green: #16a34a; }
.dark { --bg: #0f172a; --fg: #e5e7eb; --panel: #0b1220; --border: #1f2937; --muted: #94a3b8; --primary: #3b82f6; --primary-hover: #2563eb; --answer-bg: #1a1010; --answer-border: #ef4444; --answer-fg: #fca5a5; --success-bg: #06251d; --success-border: #10b981; --success-fg: #a7f3d0; --dot-gray: #334155; --dot-green: #22c55e; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif; margin: 0; padding: 0; background: var(--bg); color: var(--fg); }
.container { max-width: 980px; margin: 32px auto; padding: 0 20px; }
.topbar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.brand { display: flex; align-items: center; gap: 10px; }
.brand h1 { font-size: 22px; margin: 0; font-weight: 700; letter-spacing: .5px; }
.logo { width: 24px; height: 24px; border-radius: 7px; background: linear-gradient(135deg, #60a5fa, #22c55e); box-shadow: inset 0 0 0 1px #ffffff30; }
.panel { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 18px; margin-bottom: 18px; box-shadow: 0 6px 24px #00000008, 0 1px 2px #00000014; transition: transform .18s ease, box-shadow .18s ease; position: relative; }
.panel:hover { transform: translateY(-2px); box-shadow: 0 10px 32px #00000010, 0 2px 6px #00000018; }
.row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin: 10px 0; }
label { font-size: 14px; color: var(--muted); }
input, select { height: 44px; padding: 10px 12px; border: 1px solid var(--border); background: transparent; color: var(--fg); border-radius: 10px; outline: none; transition: border-color .15s ease, box-shadow .15s ease, background .15s ease; }
input:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px #2563eb25; }
input:hover, select:hover { background: #ffffff06; }
button { height: 44px; padding: 10px 16px; background: var(--primary); color: #fff; border: none; border-radius: 10px; cursor: pointer; box-shadow: 0 2px 8px #2563eb33; transition: transform .1s ease, box-shadow .2s ease, background .2s ease; }
button:hover { background: var(--primary-hover); box-shadow: 0 4px 16px #2563eb3d; }
button:active { transform: translateY(1px) scale(0.99); box-shadow: 0 1px 6px #2563eb2a; }
.hint { font-size: 12px; color: var(--muted); }
.answer { position: relative; background: var(--answer-bg); border: 1px dashed var(--answer-border); color: var(--answer-fg); padding: 12px 12px 12px 16px; white-space: pre-wrap; border-radius: 10px; }
.answer.correct { background: var(--success-bg); border-color: var(--success-border); color: var(--success-fg); }
.answer::before { content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: var(--answer-border); border-top-left-radius: 10px; border-bottom-left-radius: 10px; }
.answer.correct::before { background: var(--success-border); }
.progressbar { height: 6px; background: #00000010; border-radius: 999px; overflow: hidden; margin-bottom: 8px; }
#progressfill { height: 100%; width: 0%; background: linear-gradient(90deg, #22c55e, #3b82f6); transition: width .25s ease; }
.perf { display: grid; grid-template-columns: repeat(2, minmax(200px, 1fr)); gap: 10px; margin-top: 8px; }
.perf .row { margin: 0; }
.checkbox { display: flex; align-items: center; gap: 6px; }
.controls { display: grid; grid-template-columns: repeat(12, minmax(80px, 1fr)); gap: 16px; align-items: end; margin-bottom: 14px; }
.control { grid-column: span 3; display: flex; flex-direction: column; gap: 6px; min-width: 160px; }
.control.actions-row { grid-column: span 2; display: flex; align-items: center; gap: 12px; justify-self: start; }
.control > label { margin-bottom: 4px; }
.dots { display: flex; gap: 6px; align-items: center; margin-left: auto; }
.dots .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--dot-gray); transform: scale(1); transition: transform .15s ease, background .2s ease; }
.dots .dot.active { background: var(--dot-green); transform: scale(1.1); }
.subtitle { margin: 0; font-size: 12px; color: var(--muted); }
/* 说明与上方控件的间距 */
.panel .hint { margin-top: 10px; }
.badge { display: inline-block; font-size: 12px; padding: 2px 8px; border-radius: 999px; background: #10b98122; color: #10b981; border: 1px solid #10b98144; margin-right: 8px; transition: filter .2s ease, transform .12s ease; }
.badge:hover { filter: brightness(1.06); }
.badge:active { transform: translateY(1px); }
.tagline { display: flex; align-items: center; gap: 8px; }
.field-grid { margin-top: 6px; }

/* 顶栏按钮幽灵样式 */
.topbar .actions button { background: transparent; color: var(--fg); border: 1px solid var(--border); }
.topbar .actions button:hover { background: #ffffff0a; }

/* 支持作者弹窗 */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.4); display: flex; align-items: center; justify-content: center; padding: 20px; z-index: 1000; }
.modal { background: var(--panel); color: var(--fg); border: 1px solid var(--border); border-radius: 12px; padding: 16px; width: min(420px, 90vw); box-shadow: 0 10px 30px rgba(0,0,0,.2); }

/* 响应式：窄屏改为两列 */
@media (max-width: 900px) {
  .controls { grid-template-columns: repeat(6, 1fr); }
  .control { grid-column: span 6; }
  .control.actions-row { grid-column: span 6; justify-self: start; }
}

/* 让“开始”按钮固定在卡片右侧且在卡片内 */
.panel-actions { display: flex; justify-content: flex-end; }

/* 错题本严重程度小圆点 */
.wb-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--dot-gray); }
.wb-red { background: #ef4444; }
.wb-orange { background: #f59e0b; }
.wb-yellow { background: #eab308; }
.wb-green { background: #22c55e; }
.wb-blue { background: #3b82f6; }

/* 右下角统计小模块 */
.stat-chip {
  position: absolute;
  right: 16px;
  bottom: 16px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 12px;
  box-shadow: 0 2px 8px #00000014;
}

